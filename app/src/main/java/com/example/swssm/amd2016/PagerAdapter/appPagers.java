package com.example.swssm.amd2016.PagerAdapter;

import android.app.ActivityManager;
import android.content.Context;
import android.content.pm.PackageManager;
import android.graphics.drawable.Drawable;
import android.util.Log;
import android.widget.ListView;

import com.example.swssm.amd2016.R;
import com.example.swssm.amd2016.appListView.appListViewAdapter;
import com.example.swssm.amd2016.appListView.appListViewItem1;

import java.util.ArrayList;
import java.util.List;

/**
 * Created by jinheon Kim on 2016-02-23.
 */
public class appPagers {
    private Context             mContext;
    private ListView            lv_appsList;


    public appPagers(Context c, ListView lv){
        mContext = c;
        lv_appsList = lv;
    }



    public void setAppListView_1(){
        List<String> nameList = new ArrayList<>();
        List<Integer> pidList = new ArrayList<>();

        ArrayList<appListViewItem1> ListViewItem = new ArrayList<>();

        ActivityManager activityManager = (ActivityManager) mContext.getSystemService(Context.ACTIVITY_SERVICE);
        List<ActivityManager.RunningAppProcessInfo> pidsTask = activityManager.getRunningAppProcesses();
        appListViewItem1 item;

        for(int i = 0; i < pidsTask.size(); i++) {
            nameList.add(pidsTask.get(i).processName);
            pidList.add(pidsTask.get(i).pid);


            Log.i("propropropro", "propropropro" + " " + pidsTask.get(i).pid + " " + pidsTask.get(i).processName);
            try {
                Drawable icon = mContext.getPackageManager().getApplicationIcon(nameList.get(i));

                item = new appListViewItem1(icon, nameList.get(i), pidList.get(i));
                if(pidsTask.get(i).processName.equals("com.android.nfc")  ||
                        pidsTask.get(i).processName.equals("com.android.settings") ||
                        pidsTask.get(i).processName.equals("com.android.deskclock") ||
                        pidsTask.get(i).processName.equals("com.android.keychain") ||
                        pidsTask.get(i).processName.equals("com.android.voicedialer") ||
                        pidsTask.get(i).processName.equals("com.android.gallery3d") ||
                        pidsTask.get(i).processName.equals("com.svox.pico") ||
                        pidsTask.get(i).processName.equals("com.android.defcontainer") ||
                        pidsTask.get(i).processName.equals("com.android.musicfx") ||
                        pidsTask.get(i).processName.equals("com.android.quicksearchbox") ||
                        pidsTask.get(i).processName.equals("com.android.launcher") ||
                        pidsTask.get(i).processName.equals("system") ||
                        pidsTask.get(i).processName.equals("com.android.phone") ||
                        pidsTask.get(i).processName.equals("com.android.smspush") ||
                        pidsTask.get(i).processName.equals("com.android.systemui") ||
                        pidsTask.get(i).processName.equals("com.android.inputmethod.latin") ||
                        pidsTask.get(i).processName.equals("com.android.providers.calendar") ||
                        pidsTask.get(i).processName.equals("com.android.calendar") ||
                        pidsTask.get(i).processName.equals("com.android.email") ||
                        pidsTask.get(i).processName.equals("com.android.exchange") ||
                        pidsTask.get(i).processName.equals("com.android.mms") ||
                        pidsTask.get(i).processName.equals("com.android.contacts") ||
                        pidsTask.get(i).processName.equals("com.android.packageinstaller")) {

                }else ListViewItem.add(item);
            } catch (PackageManager.NameNotFoundException e) {
                e.printStackTrace();
            }
        }

        appListViewAdapter adapter = new appListViewAdapter(mContext, R.layout.app_listitem1, ListViewItem);
        lv_appsList.setAdapter(adapter);

    }



}
